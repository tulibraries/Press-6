<%
  field.resource.subjects = "{\"subject\"=>{\"subject_id\"=>nil, \"subject_title\"=>nil}}" if field.resource.subjects.nil?
  subject_list = eval field.resource.subjects
  subjects = []

  subject_list["subject"].each do |subject|
    subjects.push [subject['subject_title'],subject['subject_id']]
  end if subject_list["subject"].first["subject_id"].present?
%>
<div class="field-unit__label">
  <%= f.label field.attribute, for: "#{f.object_name}_#{field.attribute}" %>
</div>
<div class="field-unit__field">
  <%= select_tag "#{f.object_name}[#{field.attribute}]", 
                  options_for_select(subjects, {selected: field.data.presence}), 
                  include_blank: "(none)"
                %>
</div>